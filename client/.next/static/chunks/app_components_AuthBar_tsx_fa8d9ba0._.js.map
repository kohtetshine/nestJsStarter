{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///app/app/components/AuthBar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from 'next/link';\nimport { useEffect, useState } from 'react';\n\ntype MeResponse = { user?: { id: number; email: string } };\n\nexport default function AuthBar() {\n  const [loading, setLoading] = useState(true);\n  const [email, setEmail] = useState<string | null>(null);\n\n  useEffect(() => {\n    const jwt = typeof window !== 'undefined' ? localStorage.getItem('jwt') : null;\n    if (!jwt) {\n      setLoading(false);\n      return;\n    }\n    fetch('/api/auth/me', {\n      headers: { Authorization: `Bearer ${jwt}` },\n      cache: 'no-store',\n    })\n      .then(async (r) => {\n        if (!r.ok) throw new Error('unauthorized');\n        const d: MeResponse = await r.json();\n        setEmail(d?.user?.email ?? null);\n      })\n      .catch(() => setEmail(null))\n      .finally(() => setLoading(false));\n  }, []);\n\n  const logout = () => {\n    localStorage.removeItem('jwt');\n    setEmail(null);\n  };\n\n  return (\n    <div className=\"w-full border-b bg-gray-50\">\n      <div className=\"max-w-5xl mx-auto px-4 py-2 flex items-center justify-between text-sm\">\n        <div className=\"flex items-center gap-4\">\n          <Link href=\"/\">Home</Link>\n        </div>\n        <div>\n          {loading ? (\n            <span className=\"opacity-60\">Checking authâ€¦</span>\n          ) : email ? (\n            <div className=\"flex items-center gap-3\">\n              <span className=\"opacity-80\">Signed in as {email}</span>\n              <button\n                onClick={logout}\n                className=\"px-2 py-1 rounded border bg-white hover:bg-gray-100\"\n              >\n                Logout\n              </button>\n            </div>\n          ) : (\n            <div className=\"flex items-center gap-3\">\n              <Link className=\"px-2 py-1 rounded border bg-white hover:bg-gray-100\" href=\"/login\">Login</Link>\n              <Link className=\"px-2 py-1 rounded border bg-white hover:bg-gray-100\" href=\"/register\">Sign up</Link>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAOe,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM,MAAM,uCAAgC,aAAa,OAAO,CAAC;YACjE,IAAI,CAAC,KAAK;gBACR,WAAW;gBACX;YACF;YACA,MAAM,gBAAgB;gBACpB,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,KAAK;gBAAC;gBAC1C,OAAO;YACT,GACG,IAAI;qCAAC,OAAO;oBACX,IAAI,CAAC,EAAE,EAAE,EAAE,MAAM,IAAI,MAAM;oBAC3B,MAAM,IAAgB,MAAM,EAAE,IAAI;oBAClC,SAAS,GAAG,MAAM,SAAS;gBAC7B;oCACC,KAAK;qCAAC,IAAM,SAAS;oCACrB,OAAO;qCAAC,IAAM,WAAW;;QAC9B;4BAAG,EAAE;IAEL,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,SAAS;IACX;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;kCAAI;;;;;;;;;;;8BAEjB,6LAAC;8BACE,wBACC,6LAAC;wBAAK,WAAU;kCAAa;;;;;+BAC3B,sBACF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;;oCAAa;oCAAc;;;;;;;0CAC3C,6LAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;6CAKH,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,+JAAA,CAAA,UAAI;gCAAC,WAAU;gCAAsD,MAAK;0CAAS;;;;;;0CACpF,6LAAC,+JAAA,CAAA,UAAI;gCAAC,WAAU;gCAAsD,MAAK;0CAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOrG;GAzDwB;KAAA","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}